from pathlib import Path
from django.contrib.gis.utils import LayerMapping
from .models import Country

country_mapping = {
    "featurecla": "featurecla",
    "scalerank": "scalerank",
    "labelrank": "LABELRANK",
    "sovereignt": "SOVEREIGNT",
    "sov_a3": "SOV_A3",
    "adm0_dif": "ADM0_DIF",
    "level": "LEVEL",
    "type": "TYPE",
    "tlc": "TLC",
    "admin": "ADMIN",
    "adm0_a3": "ADM0_A3",
    "geou_dif": "GEOU_DIF",
    "geounit": "GEOUNIT",
    "gu_a3": "GU_A3",
    "su_dif": "SU_DIF",
    "subunit": "SUBUNIT",
    "su_a3": "SU_A3",
    "brk_diff": "BRK_DIFF",
    "name": "NAME",
    "name_long": "NAME_LONG",
    "brk_a3": "BRK_A3",
    "brk_name": "BRK_NAME",
    "brk_group": "BRK_GROUP",
    "abbrev": "ABBREV",
    "postal": "POSTAL",
    "formal_en": "FORMAL_EN",
    "formal_fr": "FORMAL_FR",
    "name_ciawf": "NAME_CIAWF",
    "note_adm0": "NOTE_ADM0",
    "note_brk": "NOTE_BRK",
    "name_sort": "NAME_SORT",
    "name_alt": "NAME_ALT",
    "mapcolor7": "MAPCOLOR7",
    "mapcolor8": "MAPCOLOR8",
    "mapcolor9": "MAPCOLOR9",
    "mapcolor13": "MAPCOLOR13",
    "pop_est": "POP_EST",
    "pop_rank": "POP_RANK",
    "pop_year": "POP_YEAR",
    "gdp_md": "GDP_MD",
    "gdp_year": "GDP_YEAR",
    "economy": "ECONOMY",
    "income_grp": "INCOME_GRP",
    "fips_10": "FIPS_10",
    "iso_a2": "ISO_A2",
    "iso_a2_eh": "ISO_A2_EH",
    "iso_a3": "ISO_A3",
    "iso_a3_eh": "ISO_A3_EH",
    "iso_n3": "ISO_N3",
    "iso_n3_eh": "ISO_N3_EH",
    "un_a3": "UN_A3",
    "wb_a2": "WB_A2",
    "wb_a3": "WB_A3",
    "woe_id": "WOE_ID",
    "woe_id_eh": "WOE_ID_EH",
    "woe_note": "WOE_NOTE",
    "adm0_iso": "ADM0_ISO",
    "adm0_diff": "ADM0_DIFF",
    "adm0_tlc": "ADM0_TLC",
    "adm0_a3_us": "ADM0_A3_US",
    "adm0_a3_fr": "ADM0_A3_FR",
    "adm0_a3_ru": "ADM0_A3_RU",
    "adm0_a3_es": "ADM0_A3_ES",
    "adm0_a3_cn": "ADM0_A3_CN",
    "adm0_a3_tw": "ADM0_A3_TW",
    "adm0_a3_in": "ADM0_A3_IN",
    "adm0_a3_np": "ADM0_A3_NP",
    "adm0_a3_pk": "ADM0_A3_PK",
    "adm0_a3_de": "ADM0_A3_DE",
    "adm0_a3_gb": "ADM0_A3_GB",
    "adm0_a3_br": "ADM0_A3_BR",
    "adm0_a3_il": "ADM0_A3_IL",
    "adm0_a3_ps": "ADM0_A3_PS",
    "adm0_a3_sa": "ADM0_A3_SA",
    "adm0_a3_eg": "ADM0_A3_EG",
    "adm0_a3_ma": "ADM0_A3_MA",
    "adm0_a3_pt": "ADM0_A3_PT",
    "adm0_a3_ar": "ADM0_A3_AR",
    "adm0_a3_jp": "ADM0_A3_JP",
    "adm0_a3_ko": "ADM0_A3_KO",
    "adm0_a3_vn": "ADM0_A3_VN",
    "adm0_a3_tr": "ADM0_A3_TR",
    "adm0_a3_id": "ADM0_A3_ID",
    "adm0_a3_pl": "ADM0_A3_PL",
    "adm0_a3_gr": "ADM0_A3_GR",
    "adm0_a3_it": "ADM0_A3_IT",
    "adm0_a3_nl": "ADM0_A3_NL",
    "adm0_a3_se": "ADM0_A3_SE",
    "adm0_a3_bd": "ADM0_A3_BD",
    "adm0_a3_ua": "ADM0_A3_UA",
    "adm0_a3_un": "ADM0_A3_UN",
    "adm0_a3_wb": "ADM0_A3_WB",
    "continent": "CONTINENT",
    "region_un": "REGION_UN",
    "subregion": "SUBREGION",
    "region_wb": "REGION_WB",
    "name_len": "NAME_LEN",
    "long_len": "LONG_LEN",
    "abbrev_len": "ABBREV_LEN",
    "tiny": "TINY",
    "homepart": "HOMEPART",
    "min_zoom": "MIN_ZOOM",
    "min_label": "MIN_LABEL",
    "max_label": "MAX_LABEL",
    "label_x": "LABEL_X",
    "label_y": "LABEL_Y",
    "ne_id": "NE_ID",
    "wikidataid": "WIKIDATAID",
    "name_ar": "NAME_AR",
    "name_bn": "NAME_BN",
    "name_de": "NAME_DE",
    "name_en": "NAME_EN",
    "name_es": "NAME_ES",
    "name_fa": "NAME_FA",
    "name_fr": "NAME_FR",
    "name_el": "NAME_EL",
    "name_he": "NAME_HE",
    "name_hi": "NAME_HI",
    "name_hu": "NAME_HU",
    "name_id": "NAME_ID",
    "name_it": "NAME_IT",
    "name_ja": "NAME_JA",
    "name_ko": "NAME_KO",
    "name_nl": "NAME_NL",
    "name_pl": "NAME_PL",
    "name_pt": "NAME_PT",
    "name_ru": "NAME_RU",
    "name_sv": "NAME_SV",
    "name_tr": "NAME_TR",
    "name_uk": "NAME_UK",
    "name_ur": "NAME_UR",
    "name_vi": "NAME_VI",
    "name_zh": "NAME_ZH",
    "name_zht": "NAME_ZHT",
    "fclass_iso": "FCLASS_ISO",
    "tlc_diff": "TLC_DIFF",
    "fclass_tlc": "FCLASS_TLC",
    "fclass_us": "FCLASS_US",
    "fclass_fr": "FCLASS_FR",
    "fclass_ru": "FCLASS_RU",
    "fclass_es": "FCLASS_ES",
    "fclass_cn": "FCLASS_CN",
    "fclass_tw": "FCLASS_TW",
    "fclass_in": "FCLASS_IN",
    "fclass_np": "FCLASS_NP",
    "fclass_pk": "FCLASS_PK",
    "fclass_de": "FCLASS_DE",
    "fclass_gb": "FCLASS_GB",
    "fclass_br": "FCLASS_BR",
    "fclass_il": "FCLASS_IL",
    "fclass_ps": "FCLASS_PS",
    "fclass_sa": "FCLASS_SA",
    "fclass_eg": "FCLASS_EG",
    "fclass_ma": "FCLASS_MA",
    "fclass_pt": "FCLASS_PT",
    "fclass_ar": "FCLASS_AR",
    "fclass_jp": "FCLASS_JP",
    "fclass_ko": "FCLASS_KO",
    "fclass_vn": "FCLASS_VN",
    "fclass_tr": "FCLASS_TR",
    "fclass_id": "FCLASS_ID",
    "fclass_pl": "FCLASS_PL",
    "fclass_gr": "FCLASS_GR",
    "fclass_it": "FCLASS_IT",
    "fclass_nl": "FCLASS_NL",
    "fclass_se": "FCLASS_SE",
    "fclass_bd": "FCLASS_BD",
    "fclass_ua": "FCLASS_UA",
    "geom": "MULTIPOLYGON",
}

# fmt: off
country_shp = Path(__file__).resolve().parent.parent.parent / "maps" / "ne_10m_admin_0_sovereignty" / "ne_10m_admin_0_sovereignty.shp"


def run(verbose=True):
    lm = LayerMapping(Country, country_shp, country_mapping, transform=False)
    lm.save(strict=True, verbose=verbose)
